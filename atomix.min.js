!function(global){global.Atomix,global.Proton,global.Singleton,global.Interface,global.declare,global.namespace,global.mx;var nsref,nsget,exp,lib,atomix,_base_,_exports_,_namespace_,_namespaces_,Quark,Metadata,Constructor;exp=function(){},lib=function(){},_exports_=new lib,_namespace_=null,_namespaces_=[],nsref=function(a,b){for(var c=0;c<b.length;c++){if("undefined"==typeof a[b[c]])if("lib"===b[c])a[b[c]]=new lib;else{var d=Interface(b[c]),e=new d;a[b[c]]=e}a=a[b[c]]}return a},nsget=function(a){for(var b=global,c=a.split("."),d=0;d<c.length;d++)if(""!==c[d]){if("undefined"==typeof b[c[d]])throw"Exception: Namespace '"+a+"' does not exist.";b=b[c[d]]}return b},Interface=function(name){return eval("( function(){ return function "+name+"(){}; })")()},Constructor=function(name,fn){return eval("( function(call){ return function "+name+"(){ return call(this, arguments); }; })")(fn.apply.bind(fn))},Metadata=function(b){b=b||{};for(let c in b)b.hasOwnProperty(c)&&(this[c]=b[c])},Quark=function(){this._meta_=new Metadata({name:"Quark",info:"Quark Object",ns:_exports_}),this.toString=function(){return"undefined"==typeof this._meta_.name&&(this._meta_.name="Quark"),"[object "+this._meta_.name+"]"},this.decendant=function(a,b){var c,d,e,f;return e=Object.getPrototypeOf(this),f=e.constructor,b="undefined"!=typeof b?b:{},b.name=a,b.info="undefined"==typeof b.info?a+" Object":b.info,c=new Metadata(b),d=Interface(a),d.prototype=Object.create(this),d.prototype.constructor=d,d.prototype.constructor.prototype=d.prototype,d.prototype._meta_=c,d.prototype._super_=function(...a){if(f.call(this),a.length&&"function"==typeof a[a.length-1]){var b=a.pop();b.call(this,...a),this.augment(b,this)}return this},d.prototype.export(this._meta_.ns),d},this.proxy=function(a){return new Proxy(a,{get:function(a,b){if(b in a)return a[b];var c=b.replace(/(^_+|_+$)/gm,"");return c in a._meta_?a._meta_[c]:void 0}})},this.augment=function(a,b){for(let c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return this.export(this._meta_.ns),b},this.extend=this.augment,this.inherits=function(a){var b;if(a instanceof Singleton.constructor||a.prototype instanceof Singleton.constructor){var c,d,e;return d=a instanceof Singleton.constructor?a:a.prototype,c=d.decendant(this._meta_.name,this._meta_),c=new c,e=function(){var a;return function(){return"undefined"!=typeof a?a:void(a=this)}},b=Interface(this._meta_.name),b.prototype=c,b.prototype.constructor=Constructor(c._meta_.name,e()),b.prototype.constructor.prototype=c,b.prototype.export(c.exports),new b}return a instanceof Quark?new(b=a.decendant(this._meta_.name,this._meta_)):a.prototype instanceof Quark?(a=new a,new(b=a.decendant(this._meta_.name,this._meta_))):this.augment(a,this)},this.extends=this.inherits,this.define=function(a){var b=this,c=Object.getPrototypeOf(b);return c.constructor=function(...c){var d=function(...c){b._super_(a.bind(b,...c))},e=Constructor(b._meta_.name,d.bind(...c));return e.prototype=b,e.prototype.constructor=e,new e(...c)},c.constructor=Constructor(this._meta_.name,c.constructor),c.constructor.prototype=c,c.export(b._meta_.ns),this.constructor},this.implements=this.define,this.employs=this.define,this.export=function(a){let b=this._meta_.name,c="";return _namespace_!==_exports_&&null!==_namespace_&&(a=_namespace_,delete _exports_[b]),void 0===a?a=this._meta_.ns:void 0!==a&&(this._meta_.ns=a),a=a.hasOwnProperty("lib")?a.lib:a,a[b]=this.constructor,c=a===_exports_?"Atomix.exports":c,c=a.hasOwnProperty("lib")?c+".lib":c,c=""===c&&a!==global?"..":c,".."!==c.substring(0,2)&&_namespaces_.indexOf(c)<0&&_namespaces_.push(c),c+"."+b}},Quark.prototype=new Quark("Quark",{info:"Quark Object"}),Proton=Quark.prototype.decendant("Proton",{info:"Proton Object"}),_base_=new Proton,Singleton=function(){var a,b,c,d;return b=Proton.prototype.decendant("Singleton"),c=new b,Singleton=function(){return"undefined"!=typeof a?a:(a=Object.create(this),d=Interface("Singleton"),d.prototype=a,d.prototype.constructor=d,d.prototype.constructor.prototype=a,void(a=new d))},Singleton.call(c),new Singleton}(),atomix=_base_.decendant("Atomix",{info:"Atomix Object"}),atomix.prototype.class=function(b,...c){var d,e,f,g,h,i;h=b.indexOf(".")>-1?b.split("."):[b],h.length>0&&(b=h.pop()),context=null===this._namespace_?global:this._namespace_,context=h.length>0||null!==this._namespace_?context:this.exports,i=nsref(context,h);for(var k=0;k<c.length;k++)"object"==typeof c[k]&&(f=c[k]),"function"==typeof c[k]&&(g=c[k]);return f="undefined"==typeof f?{}:f,parent="undefined"==typeof f.parent?_base_:f.parent,e=parent.decendant(b,f),d=new e,d.export(i),"undefined"!=typeof g?d.definition(g):d},atomix.prototype.export=function(a,b){var c=this.exports[b],d=a===this.exports&&"string"!=typeof a?"Atomix.exports":"";return"string"==typeof a&&(d=a,namespaces=a.indexOf(".")>-1?a.split("."):[a],a=nsref(global,namespaces)),a!==this.exports&&(a.hasOwnProperty("lib")||(a.lib=new lib),a.lib[b]=c,d=""===d&&a!==global?"..":d,d+=".lib"),".."!==d.substring(0,2)&&atomix.prototype.namespaces.indexOf(nspath)<0&&atomix.prototype.namespaces.push(d),d+"."+b},atomix.prototype.import=function(a){if(a.indexOf(".")>-1)return nsget(a);if(this.exports.hasOwnProperty(a))return this.exports[a];for(var b,c,d=0;d<this.namespaces.length;d++){if(c=this.namespaces[d],b=nsget(c),b.hasOwnProperty(a))return b[a];if(b.hasOwnProperty("lib")&&b.lib.hasOwnProperty(a))return b.lib[a]}throw"Exception: Object '"+a+"' not found."},atomix.prototype.build=function(a,...b){var c=_namespace_?_namespace_[a]:this.exports[a];return new c(...b)},atomix.prototype.autobuild=function(a,...b){var c=this.import(a);return new c(...b)},atomix.prototype.new=function(){Object.defineProperty(atomix.prototype,"new",{get:function(){return this._namespace_=null,_namespace_=null,this}})}(),atomix.prototype.ns=function(a){var b;return null===a||"undefined"==typeof a||a===_exports_?(_namespace_=null,Atomix._namespace_=null,Atomix):("string"==typeof a&&(_namespaces_.indexOf(a)<0&&_namespaces_.push(a),b=a.indexOf(".")>-1?a.split("."):[a],a=nsref(global,b)),a.hasOwnProperty("lib")||(a.lib=new lib),Atomix._namespace_=a,_namespace_=a,Atomix)},atomix.prototype.singleton=function(a,b){var c,d,e;return c=Singleton.decendant(a),c=new c,c._meta_.name=a,c._meta_.info=a+" Object",e=function(){var a;return function(){return"undefined"!=typeof a?a:(a=this,void(b&&b.call(a)))}},d=Interface(a),d.prototype=c,d.prototype.constructor=Constructor(a,e()),d.prototype.constructor.prototype=Singleton,d.prototype.export(this.exports),new d},atomix.prototype.namespace=function(b){var c,d,e,f,g;return f=b,g=b.indexOf(".")>-1?b.split("."):[b],b=g.pop(),d=nsref(global,g),c=Interface(b),e=new c,d[b]=e,Atomix.namespaces.indexOf(f)<0&&Atomix.namespaces.push(f),Atomix.namespaces},atomix.prototype.unpack=function(a){var b,c;return b=a.split("."),a=b.pop(),c=nsget(b.join(".")),c[a]},declare=atomix.prototype.new.class,namespace=atomix.prototype.namespace,singleton=atomix.prototype.singleton,atomix.prototype.c=atomix.prototype.build,atomix.prototype.gimp=atomix.prototype.unpack,atomix.prototype.limp=atomix.prototype.import,atomix.prototype.blimp=atomix.prototype.autobuild,Atomix=new atomix,Atomix.exports=_exports_,Atomix._namespace_=_namespace_,Atomix.namespaces=_namespaces_,mx=Atomix,Object.freeze(Proton),Object.freeze(Atomix),Object.freeze(Atomix._meta_),Object.preventExtensions(Atomix)}(this);